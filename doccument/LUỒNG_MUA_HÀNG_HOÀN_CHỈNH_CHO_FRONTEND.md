# üõçÔ∏è H∆Ø·ªöNG D·∫™N LU·ªíNG MUA H√ÄNG HO√ÄN CH·ªàNH CHO FRONTEND

## üìã **T·ªîNG QUAN**

Document n√†y h∆∞·ªõng d·∫´n chi ti·∫øt **to√†n b·ªô lu·ªìng mua h√†ng** t·ª´ khi user th√™m s·∫£n ph·∫©m v√†o gi·ªè h√†ng cho ƒë·∫øn khi t·∫°o ƒë∆°n h√†ng th√†nh c√¥ng, bao g·ªìm t·∫•t c·∫£ c√°c API c·∫ßn thi·∫øt, request/response m·∫´u v√† x·ª≠ l√Ω l·ªói.

---

## üéØ **C√ÅC LU·ªíNG MUA H√ÄNG CH√çNH**

### **1. LU·ªíNG TH√äM V√ÄO GI·ªé H√ÄNG**
User duy·ªát s·∫£n ph·∫©m ‚Üí ·∫§n "Th√™m v√†o gi·ªè" ‚Üí Ch·ªçn s·ªë l∆∞·ª£ng ‚Üí Th√™m th√†nh c√¥ng

### **2. LU·ªíNG MUA NGAY**  
User ch·ªçn s·∫£n ph·∫©m ‚Üí ·∫§n "Mua ngay" ‚Üí Chuy·ªÉn th·∫≥ng ƒë·∫øn checkout ‚Üí Thanh to√°n

### **3. LU·ªíNG CHECKOUT T·ª™ GI·ªé H√ÄNG**
User v√†o gi·ªè h√†ng ‚Üí Ch·ªçn s·∫£n ph·∫©m ‚Üí ·∫§n "Thanh to√°n" ‚Üí ƒêi·ªÅn th√¥ng tin ‚Üí ƒê·∫∑t h√†ng

---

## üõí **PH·∫¶N 1: LU·ªíNG TH√äM V√ÄO GI·ªé H√ÄNG**

### **B∆∞·ªõc 1: Th√™m s·∫£n ph·∫©m v√†o gi·ªè h√†ng**

#### **API Call:**
```http
POST /api/carts/items
Content-Type: application/json

{
  "userId": 4,
  "bookId": 3,
  "quantity": 1
}
```

#### **Success Response (200):**
```json
{
  "status": 200,
  "message": "Th√™m s·∫£n ph·∫©m v√†o gi·ªè h√†ng th√†nh c√¥ng üî• ƒê√£ √°p d·ª•ng flash sale!",
  "data": {
    "id": 456,
    "userId": 4,
    "bookId": 3,
    "bookTitle": "Ch√≠ Ph√®o",
    "quantity": 1,
    "unitPrice": 25000.00,
    "totalPrice": 25000.00,
    "originalPrice": 36000.00,
    "isFlashSale": true,
    "flashSaleItemId": 789,
    "savings": 11000.00,
    "selected": true,
    "isOutOfStock": false,
    "availableStock": 50
  }
}
```

#### **Error Responses:**
```json
// H·∫øt h√†ng
{
  "status": 400,
  "message": "S√°ch 'Ch√≠ Ph√®o' ch·ªâ c√≤n 0 cu·ªën trong kho",
  "data": null
}

// S·ªë l∆∞·ª£ng v∆∞·ª£t qu√° stock
{
  "status": 400,
  "message": "B·∫°n ƒë√£ c√≥ 2 trong gi·ªè. S√°ch 'Ch√≠ Ph√®o' ch·ªâ c√≤n 3 cu·ªën trong kho",
  "data": null
}
```


### **B∆∞·ªõc 2: L·∫•y danh s√°ch s·∫£n ph·∫©m trong gi·ªè h√†ng (cart items)**

#### **API Call:**
 
#### **Success Response (200):**
 
 
## ‚ö° **PH·∫¶N 2: LU·ªíNG MUA NGAY**

### **B∆∞·ªõc 1: T·∫°o checkout session tr·ª±c ti·∫øp**

#### **API Call:**
```http
POST /api/checkout-sessions
Content-Type: application/json

{
  "items": [
    {
      "bookId": 3,
      "quantity": 1
    }
  ],
  "addressId": 1
}
```
**Query Parameter:** `userId=4`

#### **Success Response (201):**
```json
{
  "status": 201,
  "message": "T·∫°o checkout session th√†nh c√¥ng",
  "data": {
    "id": 214,
    "userId": 4,
    "addressId": 1,
    "addressFullText": "ƒê·ªãa ch·ªâ 1, Ph∆∞·ªùng 1, Qu·∫≠n 1, TP.HCM",
    "recipientName": "L√™ VƒÉn C",
    "recipientPhone": "0123456789",
    "shippingMethod": null,
    "shippingFee": 0,
    "paymentMethod": null,
    "selectedVoucherIds": null,
    "selectedVouchers": [],
    "checkoutItems": [
      {
        "bookId": 3,
        "bookTitle": "Ch√≠ Ph√®o",
        "bookImage": null,
        "quantity": 1,
        "unitPrice": 25000.00,
        "originalPrice": 36000.00,
        "totalPrice": 25000.00,
        "isFlashSale": true,
        "flashSaleName": "Flash Sale T·∫øt",
        "savings": 11000.00,
        "isOutOfStock": false,
        "availableStock": 50
      }
    ],
    "subtotal": 25000.00,
    "totalDiscount": 0,
    "totalAmount": 25000.00,
    "status": 1,
    "statusText": "Active",
    "expiresAt": 1752689090392,
    "isExpired": false,
    "isActive": true,
    "timeRemaining": 86399979,
    "createdAt": 1752602690405,
    "updatedAt": 1752602690405
  }
}
```

### **B∆∞·ªõc 2: C·∫≠p nh·∫≠t th√¥ng tin checkout session**

#### **API Call:**
```http
PUT /api/checkout-sessions/214?userId=4
Content-Type: application/json

{
  "items": [
    {
      "bookId": 3,
      "quantity": 1
    }
  ],
  "addressId": 1,
  "paymentMethod": "COD",
  "selectedVoucherIds": [1, 2],
  "notes": "Giao h√†ng bu·ªïi chi·ªÅu"
}
```

#### **Success Response (200):**
```json
{
  "status": 200,
  "message": "C·∫≠p nh·∫≠t checkout session th√†nh c√¥ng",
  "data": {
    "id": 214,
    "paymentMethod": "COD",
    "selectedVoucherIds": [1, 2],
    "selectedVouchers": [
      {
        "id": 1,
        "code": "WELCOME10",
        "discountAmount": 5000.00
      }
    ],
    "subtotal": 25000.00,
    "totalDiscount": 5000.00,
    "totalAmount": 20000.00,
    "notes": "Giao h√†ng bu·ªïi chi·ªÅu"
  }
}
```

#### **Error Response - Thi·∫øu items:**
```json
{
  "status": 400,
  "message": "D·ªØ li·ªáu kh√¥ng h·ª£p l·ªá",
  "data": [
    {
      "field": "items",
      "message": "Danh s√°ch s·∫£n ph·∫©m kh√¥ng ƒë∆∞·ª£c ƒë·ªÉ tr·ªëng",
      "rejectedValue": null
    }
  ]
}
```

### **B∆∞·ªõc 3: T·∫°o ƒë∆°n h√†ng t·ª´ session**

#### **API Call:**
```http
POST /api/checkout-sessions/214/create-order?userId=4
```

#### **Success Response (201):**
```json
{
  "status": 201,
  "message": "ƒê·∫∑t h√†ng th√†nh c√¥ng! M√£ ƒë∆°n h√†ng: ORD20250716001",
  "data": "12345"
}
```

---

## üõçÔ∏è **PH·∫¶N 3: LU·ªíNG CHECKOUT T·ª™ GI·ªé H√ÄNG**

### **B∆∞·ªõc 1: Validate gi·ªè h√†ng tr∆∞·ªõc khi checkout**

#### **API Call:**
```http
POST /api/carts/user/4/validate
```

#### **Success Response (200):**
```json
{
  "status": 200,
  "message": "C·∫≠p nh·∫≠t gi·ªè h√†ng th√†nh c√¥ng",
  "data": {
    "cartId": 1,
    "totalItems": 2,
    "items": [
      {
        "id": 456,
        "bookId": 3,
        "isOutOfStock": false,
        "isFlashSaleExpired": false
      }
    ]
  }
}
```

### **B∆∞·ªõc 2: T·∫°o checkout session t·ª´ gi·ªè h√†ng**

#### **API Call:**
```http
POST /api/checkout-sessions/from-cart?userId=4
```

#### **Success Response (201):**
```json
{
  "status": 201,
  "message": "T·∫°o checkout session th√†nh c√¥ng",
  "data": {
    "id": 215,
    "userId": 4,
    "addressId": 1,
    "addressFullText": "ƒê·ªãa ch·ªâ m·∫∑c ƒë·ªãnh...",
    "checkoutItems": [
      {
        "bookId": 3,
        "quantity": 1,
        "isFlashSale": true,
        "unitPrice": 25000.00
      }
    ],
    "subtotal": 25000.00,
    "totalAmount": 25000.00,
    "status": 1,
    "isActive": true
  }
}
```

#### **Error Responses:**
```json
// Gi·ªè h√†ng tr·ªëng
{
  "status": 400,
  "message": "Gi·ªè h√†ng tr·ªëng, kh√¥ng th·ªÉ t·∫°o checkout session",
  "data": null
}

// Kh√¥ng c√≥ s·∫£n ph·∫©m ƒë∆∞·ª£c ch·ªçn
{
  "status": 400,
  "message": "Kh√¥ng c√≥ s·∫£n ph·∫©m n√†o ƒë∆∞·ª£c ch·ªçn ƒë·ªÉ checkout",
  "data": null
}
```

### **B∆∞·ªõc 3: L·∫•y checkout session m·ªõi nh·∫•t**

#### **API Call:**
```http
GET /api/checkout-sessions/latest?userId=4
```

#### **Success Response (200):**
```json
{
  "status": 200,
  "message": "L·∫•y checkout session m·ªõi nh·∫•t th√†nh c√¥ng",
  "data": {
    "id": 215,
    "userId": 4,
    "checkoutItems": [...],
    "subtotal": 25000.00,
    "totalAmount": 25000.00,
    "isActive": true,
    "timeRemaining": 86399979
  }
}
```

### **B∆∞·ªõc 4: C·∫≠p nh·∫≠t th√¥ng tin giao h√†ng v√† thanh to√°n**

#### **API Call:**
```http
PUT /api/checkout-sessions/215?userId=4
Content-Type: application/json

{
  "items": [
    {
      "bookId": 3,
      "quantity": 1
    }
  ],
  "addressId": 2,
  "shippingMethod": "EXPRESS",
  "paymentMethod": "VNPAY",
  "selectedVoucherIds": [1],
  "notes": "Giao nhanh"
}
```

### **B∆∞·ªõc 5: Validate session tr∆∞·ªõc khi ƒë·∫∑t h√†ng**

#### **API Call:**
```http
POST /api/checkout-sessions/215/validate?userId=4
```

#### **Success Response (200):**
```json
{
  "status": 200,
  "message": "Validate session th√†nh c√¥ng",
  "data": {
    "id": 215,
    "isValid": true,
    "checkoutItems": [...],
    "totalAmount": 20000.00
  }
}
```

#### **Error Response - Session h·∫øt h·∫°n:**
```json
{
  "status": 400,
  "message": "Checkout session ƒë√£ h·∫øt h·∫°n",
  "data": null
}
```

### **B∆∞·ªõc 6: T·∫°o ƒë∆°n h√†ng**

#### **API Call:**
```http
POST /api/checkout-sessions/215/create-order?userId=4
```

---

## üö® **PH·∫¶N 4: X·ª¨ L√ù L·ªñI CHI TI·∫æT**

### **L·ªói khi t·∫°o ƒë∆°n h√†ng:**

#### **400 - Session h·∫øt h·∫°n:**
```json
{
  "status": 400,
  "message": "‚ùå Phi√™n checkout ƒë√£ h·∫øt h·∫°n. Vui l√≤ng t·∫°o phi√™n m·ªõi.",
  "data": null
}
```
**X·ª≠ l√Ω:** Chuy·ªÉn user v·ªÅ gi·ªè h√†ng, t·∫°o session m·ªõi

#### **400 - S·∫£n ph·∫©m h·∫øt h√†ng:**
```json
{
  "status": 400,
  "message": "‚ùå S√°ch 'Ch√≠ Ph√®o' ch·ªâ c√≤n 2 cu·ªën trong kho",
  "data": null
}
```
**X·ª≠ l√Ω:** Show dialog th√¥ng b√°o, chuy·ªÉn v·ªÅ gi·ªè h√†ng ƒë·ªÉ c·∫≠p nh·∫≠t

#### **400 - Flash sale k·∫øt th√∫c:**
```json
{
  "status": 400,
  "message": "‚ùå Flash sale cho s√°ch 'Ch√≠ Ph√®o' ƒë√£ k·∫øt th√∫c",
  "data": null
}
```
**X·ª≠ l√Ω:** T√≠nh l·∫°i gi√°, c·∫≠p nh·∫≠t session

#### **400 - Voucher h·∫øt h·∫°n:**
```json
{
  "status": 400,
  "message": "‚ùå Voucher 'WELCOME10' ƒë√£ h·∫øt h·∫°n",
  "data": null
}
```
**X·ª≠ l√Ω:** B·ªè voucher, t√≠nh l·∫°i t·ªïng ti·ªÅn

#### **400 - Gi√° thay ƒë·ªïi:**
```json
{
  "status": 400,
  "message": "‚ùå Gi√° s√°ch 'Ch√≠ Ph√®o' ƒë√£ thay ƒë·ªïi. Vui l√≤ng c·∫≠p nh·∫≠t l·∫°i gi·ªè h√†ng",
  "data": null
}
```
**X·ª≠ l√Ω:** Refresh session, hi·ªÉn th·ªã gi√° m·ªõi

---

## üí° **PH·∫¶N 5: LOGIC X·ª¨ L√ù SAU KHI T·∫†O ƒê∆†N TH√ÄNH C√îNG**

### **C√°c b∆∞·ªõc t·ª± ƒë·ªông ƒë∆∞·ª£c backend th·ª±c hi·ªán:**

1. **Tr·ª´ s·ªë l∆∞·ª£ng t·ªìn kho:** `book.stockQuantity -= quantity`
2. **C·∫≠p nh·∫≠t s·ªë l∆∞·ª£ng ƒë√£ b√°n:** `book.soldCount += quantity`
3. **Tr·ª´ flash sale stock:** `flashSaleItem.stockQuantity -= quantity`
4. **C·∫≠p nh·∫≠t flash sale sold:** `flashSaleItem.soldCount += quantity`
5. **S·ª≠ d·ª•ng voucher:** `voucher.usedCount += 1`
6. **Mark session completed:** `session.status = 2`
7. **Clear gi·ªè h√†ng:** X√≥a t·∫•t c·∫£ items ƒë√£ checkout

---

## üîß **PH·∫¶N 6: C√ÅC API B·ªî SUNG QUAN TR·ªåNG**

### **1. L·∫•y ƒë·ªãa ch·ªâ m·∫∑c ƒë·ªãnh:**
```http
GET /api/addresses/user/4/default
```

### **2. L·∫•y danh s√°ch voucher kh·∫£ d·ª•ng:**
```http
GET /api/vouchers/available?userId=4&subtotal=25000
```

### **3. T√≠nh ph√≠ v·∫≠n chuy·ªÉn:**
```http
POST /api/shipping/calculate
{
  "addressId": 1,
  "items": [{"bookId": 3, "quantity": 1}]
}
```

### **4. L·∫•y chi ti·∫øt s√°ch:**
```http
GET /api/books/3
```

### **5. Ki·ªÉm tra flash sale active:**
```http
GET /api/flash-sales/book/3/active
```

---

## üì± **PH·∫¶N 7: IMPLEMENTATION GUIDE CHO FRONTEND**

### **1. JavaScript/TypeScript Code Example:**

```javascript
class CheckoutService {
  // Th√™m v√†o gi·ªè h√†ng
  async addToCart(userId, bookId, quantity) {
    try {
      const response = await fetch('/api/carts/items', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ userId, bookId, quantity })
      });
      
      const result = await response.json();
      
      if (result.status === 200) {
        this.showSuccessMessage(result.message);
        this.updateCartCount();
      } else {
        this.handleError(result.message);
      }
      
      return result;
    } catch (error) {
      this.handleError('L·ªói k·∫øt n·ªëi. Vui l√≤ng th·ª≠ l·∫°i.');
    }
  }

  // Mua ngay
  async buyNow(userId, bookId, quantity) {
    try {
      // 1. T·∫°o checkout session
      const sessionResponse = await fetch('/api/checkout-sessions', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({
          items: [{ bookId, quantity }]
        })
      });
      
      const sessionResult = await sessionResponse.json();
      
      if (sessionResult.status === 201) {
        // 2. Chuy·ªÉn ƒë·∫øn trang checkout
        window.location.href = `/checkout/${sessionResult.data.id}`;
      } else {
        this.handleError(sessionResult.message);
      }
      
    } catch (error) {
      this.handleError('L·ªói khi t·∫°o phi√™n checkout');
    }
  }

  // Checkout t·ª´ gi·ªè h√†ng
  async checkoutFromCart(userId) {
    try {
      // 1. Validate gi·ªè h√†ng
      await this.validateCart(userId);
      
      // 2. T·∫°o session t·ª´ gi·ªè h√†ng
      const response = await fetch(`/api/checkout-sessions/from-cart?userId=${userId}`, {
        method: 'POST'
      });
      
      const result = await response.json();
      
      if (result.status === 201) {
        window.location.href = `/checkout/${result.data.id}`;
      } else {
        this.handleError(result.message);
      }
      
    } catch (error) {
      this.handleError('L·ªói khi t·∫°o phi√™n checkout t·ª´ gi·ªè h√†ng');
    }
  }

  // C·∫≠p nh·∫≠t checkout session
  async updateCheckoutSession(sessionId, userId, updateData) {
    try {
      const response = await fetch(`/api/checkout-sessions/${sessionId}?userId=${userId}`, {
        method: 'PUT',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify(updateData)
      });
      
      const result = await response.json();
      
      if (result.status === 200) {
        return result.data;
      } else {
        throw new Error(result.message);
      }
      
    } catch (error) {
      this.handleError(error.message);
    }
  }

  // T·∫°o ƒë∆°n h√†ng
  async createOrder(sessionId, userId) {
    try {
      this.showLoading('ƒêang x·ª≠ l√Ω ƒë∆°n h√†ng...');
      
      // 1. Validate session tr∆∞·ªõc
      const validateResult = await this.validateSession(sessionId, userId);
      if (validateResult.status !== 200) {
        throw new Error(validateResult.message);
      }
      
      // 2. T·∫°o ƒë∆°n h√†ng
      const response = await fetch(`/api/checkout-sessions/${sessionId}/create-order?userId=${userId}`, {
        method: 'POST'
      });
      
      const result = await response.json();
      
      this.hideLoading();
      
      if (result.status === 201) {
        // Th√†nh c√¥ng - chuy·ªÉn ƒë·∫øn trang th√†nh c√¥ng
        window.location.href = `/order-success/${result.data}`;
      } else {
        this.handleOrderError(result.message, sessionId, userId);
      }
      
    } catch (error) {
      this.hideLoading();
      this.handleError(error.message);
    }
  }

  // X·ª≠ l√Ω l·ªói khi t·∫°o ƒë∆°n h√†ng
  handleOrderError(errorMessage, sessionId, userId) {
    if (errorMessage.includes('h·∫øt h·∫°n')) {
      this.showDialog({
        title: 'Phi√™n h·∫øt h·∫°n',
        message: 'Phi√™n checkout ƒë√£ h·∫øt h·∫°n. Ch√∫ng t√¥i s·∫Ω t·∫°o phi√™n m·ªõi cho b·∫°n.',
        onConfirm: () => this.checkoutFromCart(userId)
      });
    } else if (errorMessage.includes('h·∫øt h√†ng')) {
      this.showDialog({
        title: 'S·∫£n ph·∫©m h·∫øt h√†ng',
        message: errorMessage + '\n\nB·∫°n s·∫Ω ƒë∆∞·ª£c chuy·ªÉn v·ªÅ gi·ªè h√†ng ƒë·ªÉ c·∫≠p nh·∫≠t.',
        onConfirm: () => window.location.href = '/cart'
      });
    } else if (errorMessage.includes('thay ƒë·ªïi')) {
      this.showDialog({
        title: 'Gi√° thay ƒë·ªïi',
        message: errorMessage + '\n\nVui l√≤ng ki·ªÉm tra l·∫°i ƒë∆°n h√†ng.',
        onConfirm: () => this.refreshSession(sessionId, userId)
      });
    } else {
      this.showError(errorMessage);
    }
  }

  // Validate session
  async validateSession(sessionId, userId) {
    const response = await fetch(`/api/checkout-sessions/${sessionId}/validate?userId=${userId}`, {
      method: 'POST'
    });
    return await response.json();
  }

  // Helper methods
  showSuccessMessage(message) { /* Toast success */ }
  showError(message) { /* Toast error */ }
  showLoading(message) { /* Show loading spinner */ }
  hideLoading() { /* Hide loading spinner */ }
  showDialog(options) { /* Show confirmation dialog */ }
  updateCartCount() { /* Update cart item count in header */ }
  handleError(message) { /* Generic error handler */ }
}
```

### **2. React Hook Example:**

```javascript
const useCheckout = () => {
  const [loading, setLoading] = useState(false);
  const [error, setError] = useState(null);
  
  const addToCart = useCallback(async (userId, bookId, quantity) => {
    setLoading(true);
    setError(null);
    
    try {
      const result = await checkoutService.addToCart(userId, bookId, quantity);
      return result;
    } catch (err) {
      setError(err.message);
      return null;
    } finally {
      setLoading(false);
    }
  }, []);

  const createOrder = useCallback(async (sessionId, userId) => {
    setLoading(true);
    setError(null);
    
    try {
      const result = await checkoutService.createOrder(sessionId, userId);
      return result;
    } catch (err) {
      setError(err.message);
      return null;
    } finally {
      setLoading(false);
    }
  }, []);

  return {
    loading,
    error,
    addToCart,
    createOrder,
    clearError: () => setError(null)
  };
};
```

---

## ‚ö†Ô∏è **PH·∫¶N 8: L∆ØU √ù QUAN TR·ªåNG**

### **1. Validation Request Body:**
- **LU√îN LU√îN** g·ª≠i tr∆∞·ªùng `items` trong PUT checkout session
- Tr∆∞·ªùng `items` ph·∫£i ch·ª©a √≠t nh·∫•t 1 s·∫£n ph·∫©m
- M·ªói item ph·∫£i c√≥ `bookId` v√† `quantity` h·ª£p l·ªá

### **2. X·ª≠ l√Ω ƒë·ªãa ch·ªâ:**
- N·∫øu kh√¥ng truy·ªÅn `addressId`, backend s·∫Ω d√πng ƒë·ªãa ch·ªâ m·∫∑c ƒë·ªãnh
- Lu√¥n ki·ªÉm tra user c√≥ ƒë·ªãa ch·ªâ m·∫∑c ƒë·ªãnh tr∆∞·ªõc khi checkout

### **3. Session Management:**
- Session c√≥ th·ªùi h·∫°n 24 gi·ªù
- Ki·ªÉm tra `isExpired` tr∆∞·ªõc khi thao t√°c
- C√≥ th·ªÉ gia h·∫°n session b·∫±ng API extend

### **4. Auto Detection:**
- Backend t·ª± ƒë·ªông detect flash sale cho s·∫£n ph·∫©m
- Kh√¥ng c·∫ßn frontend truy·ªÅn `flashSaleItemId`

### **5. Error Handling:**
- Ph√¢n lo·∫°i l·ªói theo status code
- Hi·ªÉn th·ªã message c·ª• th·ªÉ cho user
- Redirect ph√π h·ª£p theo t·ª´ng lo·∫°i l·ªói

---

## üìä **PH·∫¶N 9: TESTING CHECKLIST**

### **Test Cases cho Th√™m v√†o gi·ªè h√†ng:**
- ‚úÖ Th√™m s·∫£n ph·∫©m b√¨nh th∆∞·ªùng
- ‚úÖ Th√™m s·∫£n ph·∫©m c√≥ flash sale
- ‚úÖ Th√™m v∆∞·ª£t qu√° s·ªë l∆∞·ª£ng t·ªìn
- ‚úÖ Th√™m s·∫£n ph·∫©m h·∫øt h√†ng
- ‚úÖ Th√™m s·∫£n ph·∫©m ƒë√£ c√≥ trong gi·ªè

### **Test Cases cho Checkout:**
- ‚úÖ T·∫°o session t·ª´ 1 s·∫£n ph·∫©m (mua ngay)
- ‚úÖ T·∫°o session t·ª´ gi·ªè h√†ng nhi·ªÅu s·∫£n ph·∫©m
- ‚úÖ C·∫≠p nh·∫≠t session v·ªõi ƒë·ªãa ch·ªâ, voucher
- ‚úÖ T·∫°o ƒë∆°n h√†ng th√†nh c√¥ng
- ‚úÖ X·ª≠ l√Ω session h·∫øt h·∫°n
- ‚úÖ X·ª≠ l√Ω s·∫£n ph·∫©m h·∫øt h√†ng khi ƒë·∫∑t
- ‚úÖ X·ª≠ l√Ω flash sale k·∫øt th√∫c khi ƒë·∫∑t
- ‚úÖ X·ª≠ l√Ω voucher h·∫øt h·∫°n khi ƒë·∫∑t

### **Test Cases cho Error Handling:**
- ‚úÖ Network error handling
- ‚úÖ Session timeout handling  
- ‚úÖ Validation error display
- ‚úÖ Redirect after error

---

*üìù Document n√†y cover ƒë·∫ßy ƒë·ªß lu·ªìng mua h√†ng cho frontend. Update khi c√≥ thay ƒë·ªïi API ho·∫∑c business logic.*
